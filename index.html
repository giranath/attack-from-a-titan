<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Animation titanesque</title>
  <style>
    
    body {
      background-color: #282828; 
    }
    
    section {
      width: 800px;
      height: 600px;
      margin-left: auto;
      margin-right: auto;
    }

  </style>

  <script type="application/javascript" src="calcul.js"></script>
  <script type="application/javascript" src="entity.js"></script>
  <script type="application/javascript" src="world.js"></script>
  <script type="application/javascript" src="animation.js"></script>
  <script type="application/javascript">

    function rawr()
    {
      var XD = document.getElementById("saart");
      var mouse = {x: 0, y: 0};

      document.addEventListener('mousemove', function(e){ 
          mouse.x = e.clientX || e.pageX; 
          mouse.y = e.clientY || e.pageY;
          XD.innerHTML = mouse.x + " ; " + mouse.y;
      }, false);
    }
  
    function armmove(posX, posY) {

      var cal = new calcul();
      // var res = cal.calculAllPoint(10, 330, posX - 560,(posY - 71));
      var res = cal.calculAllPoint(10, 330, posX - 270, posY - 50);
      var up = document.getElementById("upperarm");
      var knee = document.getElementById("knee");
      var fore = document.getElementById("forearm");
      var hand =  document.getElementById("entity-main");
      up.setAttribute("x2",res[1].x);
      up.setAttribute("y2",res[1].y);
      knee.setAttribute("cx",res[1].x);
      knee.setAttribute("cy",res[1].y);
      fore.setAttribute("x1",res[1].x);
      fore.setAttribute("y1",res[1].y);
      fore.setAttribute("x2",res[2].x);
      fore.setAttribute("y2",res[2].y);
      hand.setAttribute("transform","translate("+res[2].x+","+res[2].y+") rotate("+res[2].theta+")");
    }
  
  </script>
</head>
<body onload="setup();rawr();">
  <section >
  <!-- <section>  -->
    <h1 id="saart">Animation titanesque</h1>
      
    <!-- Le canvas SVG -->
    <!-- <svg id="canvas" width="800" height="600" onmousemove='armmove(event.layerX, event.layerY);'> -->
    <svg id="canvas" width="800" height="600">
      <rect x="0" y="0" width="800" height="600" fill="#7EC0EE" />
      

      <!-- Le titan -->
      <g id="entity-titan" transform="translate(270, 50)">
        <use id="corps" xlink:href="assets/body.svg#corps" transform="translate(0, 250)"></use>
        <use id="tete" xlink:href="assets/head.svg#tete" transform="translate(7)"></use>
        
        <!-- Le bras -->
        <line id="upperarm" x1="10"   y1="330" x2="110" y2="120"  style="stroke:rgb(221,160,106);stroke-width:70"/>
        <line id="forearm"  x1="110"  y1="435" x2="210" y2="380"  style="stroke:rgb(221,160,106);stroke-width:70"/>
        <circle             cx="10"   cy="330" r="35"             style="fill:rgb(221,160,106);"/>
        <circle id="knee"   cx="10"   cy="435" r="35"             style="fill:rgb(221,160,106);"/>
        <!-- La main -->
        <g id="entity-main">
          <circle r="40" cx="0" cy="0"/>
          <ellipse cx="-15" cy="-47" rx="5" ry="20" fill="#FF0055"/>
          <ellipse cx="-3" cy="-50" rx="5" ry="20" fill="#FF0055"/>
          <ellipse cx="9" cy="-48" rx="5" ry="20" fill="#FF0055"/>
          <ellipse cx="23" cy="-40" rx="5" ry="20" fill="#FF0055"/>
          <ellipse cx="-30" cy="-30" rx="5" ry="20" fill="#FF0055"/>
        </g>
      </g>




    </svg> 
    <!-- Fin du canvas SVG -->
  
  </section>
</body>
</html>
